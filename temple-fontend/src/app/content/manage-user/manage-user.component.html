<ngx-spinner></ngx-spinner>
<div class="ui-g">
    <div class="ui-g-12 ui-lg-12 ui-md-12 ui-sm-12">
        <div style="text-align:center">
            <h1>ตารางสมาชิกทั้งหมด</h1>
        </div>
        <div class="line"></div>
        <br>
        <div class="container">
            <div class="row">
                <div class="ui-g">
                    <div class="ui-g-12 ui-lg-12 ui-md-12 ui-sm-12">
                        <p-table [columns]="cols" [paginator]="true" [value]='personal' [rows]="5" [responsive]="true">
                            <ng-template pTemplate="caption">
                                <div style="text-align:left">
                                    <button pButton type="button" label="เพิ่ม" class="ui-button-info"
                                        style="width: 20%" [routerLink]="[ '/users/create']"></button>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th pSortableColumn="fname">
                                        สมาชิก
                                        <p-sortIcon field="fname" ariaLabel="Activate to sort"
                                            ariaLabelDesc="Activate to sort in descending order"
                                            ariaLabelAsc="Activate to sort in ascending order">
                                        </p-sortIcon>
                                    </th>
                                    <th pSortableColumn="rolename">
                                        สิทธิการเข้าใช้งาน
                                        <p-sortIcon field="rolename" ariaLabel="Activate to sort"
                                            ariaLabelDesc="Activate to sort in descending order"
                                            ariaLabelAsc="Activate to sort in ascending order">
                                        </p-sortIcon>
                                    </th>
                                    <th pSortableColumn="email">
                                        ข้อมูลติดต่อ
                                        <p-sortIcon field="email" ariaLabel="Activate to sort"
                                            ariaLabelDesc="Activate to sort in descending order"
                                            ariaLabelAsc="Activate to sort in ascending order">
                                        </p-sortIcon>
                                    </th>
                                    <th>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns">
                                <tr>
                                    <td *ngFor="let col of columns;">
                                        <div *ngIf="rowData[col.field] == rowData['name'] && col.field == 'name'">
                                            {{rowData.titleName}}{{rowData.fname}} {{rowData.lname}}</div>
                                        <div *ngIf="rowData[col.field] == rowData['rolename'] && col.field == 'rolename'"
                                            style="text-align: center">{{rowData.rolename}}</div>
                                        <div *ngIf="rowData[col.field] == rowData['contact'] && col.field == 'contact'">
                                            <span *ngIf="rowData?.email"><i class="pi pi-envelope"></i>
                                                {{rowData.email}}</span>
                                        </div>
                                        <div *ngIf="rowData[col.field] == rowData['contact'] && col.field == 'contact'">
                                            <i class="pi pi-mobile"></i> {{rowData.tel}}</div>
                                    </td>
                                    <td>
                                        <div style="text-align:center">
                                            <button pButton type="button" [routerLink]="[ '/users',rowData.id,'edit']"
                                                label="แก้ไข" class="ui-button-warning ui-button-raised"
                                                style="width: 40%;"></button>
                                            <!-- <button pButton type="button" (click)="deleteUser(rowData.id)" label="ลบ" class="ui-button-danger"
                                                style="width: 40%;margin-left: 5mm"></button> -->
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>